{"ast":null,"code":"// @ is an alias to /src\nimport request from \"@/utils/request\";\nexport default {\n  name: 'HomeView',\n  components: {},\n\n  data() {\n    return {\n      form: {},\n      dialogVisible: false,\n      search: '',\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      tableData: []\n    };\n  },\n\n  methods: {\n    handleEdit(row) {\n      this.form = JSON.parse(JSON.stringify(row));\n      this.dialogVisible = true;\n    },\n\n    handleSizeChange() {\n      this.load();\n    },\n\n    handleCurrentChange() {\n      this.load();\n    },\n\n    // add(){\n    //   this.dialogVisible=true\n    //   this.form={}\n    // },\n    save() {\n      if (this.form.id) {\n        //更新\n        request.put(\"/api/user\", this.form).then(res => {\n          // console.log(res)\n          if (res.code === '0') {\n            this.$message({\n              type: \"success\",\n              message: \"更新成功\"\n            });\n          } else {\n            this.$message({\n              type: \"error\",\n              message: res.msg\n            });\n          }\n        });\n      } else {\n        request.post(\"/api/user\", this.form).then(res => {\n          // console.log\n          if (res.code === '0') {\n            this.$message({\n              type: \"success\",\n              message: \"新增成功\"\n            });\n          } else {\n            this.$message({\n              type: \"error\",\n              message: res.msg\n            });\n          }\n        });\n      }\n\n      this.load();\n      this.dialogVisible = false;\n      this.form = {};\n    },\n\n    load() {\n      request.get(\"/api/user\", {\n        params: {\n          pageNum: this.currentPage,\n          pageSize: this.pageSize,\n          search: this.search\n        }\n      }).then(res => {\n        console.log(res);\n        this.tableData = res.data.records;\n        this.total = res.data.total;\n      });\n    },\n\n    handleDelete(id) {\n      request.delete(\"/api/user/\" + id).then(res => {\n        if (res.code === '0') {\n          this.$message({\n            type: \"success\",\n            message: \"删除成功\"\n          });\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.msg\n          });\n        }\n      });\n      this.load();\n    }\n\n  },\n\n  created() {\n    this.load();\n  }\n\n};","map":{"version":3,"mappings":"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","names":["request","name","components","data","form","dialogVisible","search","currentPage","pageSize","total","tableData","methods","handleEdit","row","JSON","parse","stringify","handleSizeChange","load","handleCurrentChange","save","id","put","then","res","code","$message","type","message","msg","post","get","params","pageNum","console","log","records","handleDelete","delete","created"],"sourceRoot":"","sources":["C:\\Users\\83843\\Desktop\\实训Ⅲ\\shixun\\vue\\src\\views\\HomeView.vue"],"sourcesContent":["<template>\n  <div style=\"padding:10px;width: 100%\">\n    <div style=\"margin: 10px\">\n      <el-input v-model=\"search\" placeholder=\"请输入关键字\" style=\"width: 20%;\" clearable/>\n      <el-button type=\"primary\" style=\"margin-left: 5px\" @click=\"load\">查询</el-button>\n    </div>\n    <el-table :data=\"tableData\" border style=\"width: 100%\">\n      <el-table-column prop=\"id\" label=\"ID\" sortable/>\n      <el-table-column prop=\"username\" label=\"用户名\"/>\n      <el-table-column prop=\"nickName\" label=\"昵称\"/>\n      <el-table-column prop=\"age\" label=\"年龄\"/>\n      <el-table-column prop=\"sex\" label=\"性别\"/>\n      <el-table-column prop=\"address\" label=\"地址\"/>\n      <el-table-column fixed=\"right\" label=\"操作\" width=\"120\">\n        <template #default=\"scope\">\n          <el-button link type=\"primary\" size=\"small\" @click=\"handleEdit(scope.row)\"\n          >编辑</el-button\n          >\n          <el-popconfirm title=\"确认删除吗?\" @confirm=\"handleDelete(scope.row.id)\">\n            <template #reference>\n              <el-button link type=\"danger\" size=\"small\">删除</el-button>\n            </template>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n    <div style=\"margin: 10px 0\">\n      <el-pagination\n          v-model:currentPage=\"currentPage\"\n          v-model:page-size=\"pageSize\"\n          :page-sizes=\"[5,10,20]\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n      />\n\n      <el-dialog v-model=\"dialogVisible\" title=\"Tips\" width=\"30%\">\n        <el-form label-width=\"120px\" :model=\"form\" >\n          <el-form-item label=\"用户名\">\n            <el-input v-model=\"form.username\" style=\"width: 70%\"/>\n          </el-form-item>\n          <el-form-item label=\"昵称\">\n            <el-input v-model=\"form.nickName\" style=\"width: 70%\"/>\n          </el-form-item>\n          <el-form-item label=\"年龄\">\n            <el-input v-model=\"form.age\" style=\"width: 70%\"/>\n          </el-form-item>\n          <el-form-item label=\"性别\">\n            <el-radio v-model=\"form.sex\" label=\"男\" size=\"large\">男</el-radio>\n            <el-radio v-model=\"form.sex\" label=\"女\" size=\"large\">女</el-radio>\n            <el-radio v-model=\"form.sex\" label=\"未知\" size=\"large\">未知</el-radio>\n          </el-form-item>\n          <el-form-item label=\"地址\">\n            <el-input v-model=\"form.address\" style=\"width: 70%\"/>\n          </el-form-item>\n        </el-form>\n        <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"save\">确定</el-button>\n      </span>\n        </template>\n      </el-dialog>\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\n\nimport request from \"@/utils/request\";\n\nexport default {\n  name: 'HomeView',\n  components: {\n\n  },\n  data(){\n    return{\n      form:{\n\n      },\n      dialogVisible:false,\n      search :'',\n      currentPage:1,\n      pageSize:10,\n      total:0,\n      tableData :[\n\n      ]\n    }\n  },\n  methods:{\n    handleEdit(row){\n      this.form = JSON.parse(JSON.stringify(row))\n      this.dialogVisible=true\n    },\n    handleSizeChange(){\n      this.load()\n    },\n    handleCurrentChange(){\n      this.load()\n    },\n    // add(){\n    //   this.dialogVisible=true\n    //   this.form={}\n    // },\n    save(){\n      if (this.form.id){  //更新\n        request.put(\"/api/user\",this.form).then(res=>{\n          // console.log(res)\n          if (res.code==='0'){\n            this.$message({\n              type:\"success\",\n              message:\"更新成功\",\n            })\n          }else{\n            this.$message({\n              type:\"error\",\n              message:res.msg,\n            })\n          }\n        })\n      }else{\n        request.post(\"/api/user\", this.form).then(res =>{\n          // console.log\n          if (res.code==='0'){\n            this.$message({\n              type:\"success\",\n              message:\"新增成功\",\n            })\n          }else{\n            this.$message({\n              type:\"error\",\n              message:res.msg,\n            })\n          }\n        })\n      }\n      this.load()\n      this.dialogVisible=false\n      this.form={}\n    },\n    load(){\n      request.get(\"/api/user\",{\n        params:{\n          pageNum:this.currentPage,\n          pageSize:this.pageSize,\n          search:this.search\n        }\n      }).then(res=>{\n        console.log(res)\n        this.tableData=res.data.records\n        this.total=res.data.total\n      })\n    },\n\n    handleDelete(id){\n      request.delete(\"/api/user/\"+id).then(res=>{\n        if (res.code==='0'){\n          this.$message({\n            type:\"success\",\n            message:\"删除成功\",\n          })\n        }else{\n          this.$message({\n            type:\"error\",\n            message:res.msg,\n          })\n        }\n      })\n      this.load()\n    }\n  },\n  created() {\n    this.load()\n  }\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}